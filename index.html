<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>My Queen’s Student Page</title>
    <link rel="stylesheet" href="style.css"/> <!-- 請保留這行 -->
  </head>
  <body>
    <canvas id="bg"></canvas>
    <header>
      <h1>Welcome to Hengyi's Blog</h1> <!-- 可以改成你的名字 -->
    </header>

    <main>
      <!-- ====== ABOUT SECTION ====== -->
      <section>
        <h2>About Me</h2>
        <p>
          I am a student at the Queen’s School of Computing with interests in 
          Photography, Blender, Economics, small form factor PCs (Mini-ITX), and 
          East Asian Literature..
        </p>

        <!-- 建議：如果你想要這張照片佔滿卡片上方，可以加 class="hero" -->
        <img src="me.jpeg" alt="My portrait" class="hero" />
      </section>

      <!-- ====== PROJECTS/COURSES ====== -->
      <section>
        <h2>Projects</h2>
        <ul>
          <li>Project One — one sentence description.</li>
          <li>Project Two — coming soon.</li>
        </ul>
      </section>

      <!-- ====== CONTACT ====== -->
      <section>
        <h2>Contact</h2>
        <p>Email: <a href="mailto:hengyi.dong@queensu.ca">hengyi.dong@queensu.ca</a></p>
        <p>LinkedIn: <a href="#">To be Announced</a></p>
      </section>
    </main>
      <script>
(() => {
  const c = document.getElementById('bg');
  const ctx = c.getContext('2d');

  // 顏色沿用你的主題色
  const BLUE = getComputedStyle(document.documentElement).getPropertyValue('--blue')?.trim() || '#002d72';
  const GOLD = getComputedStyle(document.documentElement).getPropertyValue('--gold')?.trim() || '#f2a900';

  let W, H, particles, maxDist;
  const DPR = Math.min(window.devicePixelRatio || 1, 2);

  function resize() {
    W = c.width = Math.floor(window.innerWidth * DPR);
    H = c.height = Math.floor(window.innerHeight * DPR);
    c.style.width = '100vw';
    c.style.height = '100vh';

    // 依視窗大小調整密度
    const count = Math.min(160, Math.floor((W * H) / (14000 * DPR)));
    maxDist = Math.max(80 * DPR, Math.min(140 * DPR, Math.sqrt(W * H) / 30));

    particles = Array.from({ length: count }, () => ({
      x: Math.random() * W,
      y: Math.random() * H,
      vx: (Math.random() - 0.5) * (0.4 * DPR),
      vy: (Math.random() - 0.5) * (0.4 * DPR),
      r: 1.6 * DPR
    }));
  }

  function step() {
    ctx.clearRect(0, 0, W, H);

    // 畫粒子
    ctx.fillStyle = 'rgba(255,255,255,.85)';
    for (const p of particles) {
      p.x += p.vx; p.y += p.vy;

      // 邊界反彈
      if (p.x < 0 || p.x > W) p.vx *= -1;
      if (p.y < 0 || p.y > H) p.vy *= -1;

      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fill();
    }

    // 連線（近距離才畫，並做透明度衰減）
    for (let i = 0; i < particles.length; i++) {
      for (let j = i + 1; j < particles.length; j++) {
        const a = particles[i], b = particles[j];
        const dx = a.x - b.x, dy = a.y - b.y;
        const d2 = dx * dx + dy * dy;
        if (d2 < maxDist * maxDist) {
          const t = 1 - Math.sqrt(d2) / maxDist; // 接近越亮
          // 使用藍→金的漸層線
          const gx = ctx.createLinearGradient(a.x, a.y, b.x, b.y);
          gx.addColorStop(0, BLUE);
          gx.addColorStop(1, GOLD);
          ctx.strokeStyle = gx;
          ctx.globalAlpha = 0.18 * t;   // 透明度
          ctx.lineWidth = Math.max(0.6 * DPR, 1.2 * t * DPR);
          ctx.beginPath();
          ctx.moveTo(a.x, a.y);
          ctx.lineTo(b.x, b.y);
          ctx.stroke();
          ctx.globalAlpha = 1;
        }
      }
    }

    requestAnimationFrame(step);
  }

  // 停止動畫給 prefers-reduced-motion
  const reduced = window.matchMedia('(prefers-reduced-motion: reduce)');
  function start() {
    if (!reduced.matches) requestAnimationFrame(step);
  }

  window.addEventListener('resize', resize);
  resize();
  start();

  // Tab 切換節能
  document.addEventListener('visibilitychange', () => {
    if (!reduced.matches && document.visibilityState === 'visible') requestAnimationFrame(step);
  });
})();
</script>
  </body>
</html>
